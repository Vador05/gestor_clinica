<input type="checkbox" ng-model="enableGroup" class="ng-pristine ng-valid ng-touched"><span>Group by</span></input>
<div class="input-group">
        <span ng-if="enableGroup" class="input-group-btn" dropdown>
            <!--<a ng-href="#" class="btn btn-default dropdown-toggle" data-toggle="dropdown"-->
               <!--ng-disabled="availableFields.length == 0" role="button" aria-expanded="false">-->
                <!--<span ng-bind-html="common.prettifyTitle(groupBy)"></span>-->
            <!--</a>-->
            <!--<ul ng-if="availableFields.length > 0" class="dropdown-menu" role="menu">-->
                <!--<li ng-repeat="field in availableFields"><a ng-click="doGroupBy(field)"-->
                                                            <!--ng-bind-html="common.prettifyTitle(field)"></a>-->
                <!--</li>-->
            <!--</ul>-->


            <ui-select multiple ng-model="groupBy" choices="availableGroups" ng-disabled="disabled" ng-change="doGroupBy(groupBy)">
                <ui-select-match placeholder="Group by"><span ng-bind-html="common.prettifyTitle($item)"></span></ui-select-match>
                <ui-select-choices
                        repeat="field in availableGroups | filter: $select.search"
                        refresh="doGroupBy($select.search)">
                    <span ng-bind-html="common.prettifyTitle(field)"></span>
                </ui-select-choices>
            </ui-select>


        </span>
</div>